(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,8593,e=>{"use strict";var s=e.i(79838),t=e.i(42311),l=e.i(71511);let a=s.default.env.NEXT_PUBLIC_API_URL??"http://localhost:4000";function r(){let e=localStorage.getItem("vibeaff_token");return{"Content-Type":"application/json",...e?{Authorization:`Bearer ${e}`}:{}}}function i({className:e=""}){return(0,t.jsx)("div",{className:`animate-pulse rounded-xl bg-zinc-800 ${e}`})}function d(){let[e,s]=(0,l.useState)(null),[d,n]=(0,l.useState)([]),[c,o]=(0,l.useState)([]),[x,h]=(0,l.useState)(!0),[m,u]=(0,l.useState)(!0),[b,p]=(0,l.useState)(!0),[j,g]=(0,l.useState)(null),[f,y]=(0,l.useState)(null),[N,w]=(0,l.useState)(null),[v,k]=(0,l.useState)(null),C=(0,l.useCallback)(async()=>{h(!0),g(null);try{let e=await fetch(`${a}/v1/metrics`,{headers:r()});if(!e.ok)throw Error(`HTTP ${e.status}`);s(await e.json())}catch(e){g(e.message)}finally{h(!1)}},[]),$=(0,l.useCallback)(async()=>{u(!0),y(null);try{let e=await fetch(`${a}/v1/payouts`,{headers:r()});if(!e.ok)throw Error(`HTTP ${e.status}`);let s=await e.json();n(s.data??s)}catch(e){y(e.message)}finally{u(!1)}},[]),S=(0,l.useCallback)(async()=>{p(!0),w(null);try{let e=await fetch(`${a}/v1/audit-logs?limit=5`,{headers:r()});if(!e.ok)throw Error(`HTTP ${e.status}`);let s=await e.json();o(s.data??s)}catch(e){w(e.message)}finally{p(!1)}},[]);(0,l.useEffect)(()=>{C(),$(),S();let e=setInterval(()=>{C(),$(),S()},3e4);return()=>clearInterval(e)},[C,$,S]);let T=async(e,s)=>{k(`${e}-${s}`);try{let t=await fetch(`${a}/v1/payouts/${e}/${s}`,{method:"POST",headers:r(),body:JSON.stringify("hold"===s?{reason:"Admin hold"}:{note:`${s.charAt(0).toUpperCase()+s.slice(1)}d by admin`})});if(!t.ok)throw Error(`HTTP ${t.status}`);await $()}catch{}finally{k(null)}},A=[{label:"Merchants",value:e?.merchants},{label:"Affiliates",value:e?.affiliates},{label:"Programs",value:e?.programs},{label:"Campaigns",value:e?.campaigns},{label:"Conversions",value:e?.conversions},{label:"Payouts",value:e?.payouts},{label:"Channels",value:e?.channels},{label:"Creative tools",value:e?.creativeTools}];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("section",{className:"grid gap-6 md:grid-cols-4",children:x?Array.from({length:8}).map((e,s)=>(0,t.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5",children:[(0,t.jsx)(i,{className:"h-4 w-20 mb-3"}),(0,t.jsx)(i,{className:"h-7 w-16"})]},s)):j?(0,t.jsxs)("div",{className:"md:col-span-4 rounded-2xl border border-red-500/20 bg-red-500/5 p-6 text-center",children:[(0,t.jsxs)("p",{className:"text-sm text-red-400 mb-3",children:["Failed to load metrics: ",j]}),(0,t.jsx)("button",{onClick:C,className:"rounded-full border border-white/20 px-4 py-2 text-sm text-white hover:bg-white/10 transition",children:"Retry"})]}):A.map(e=>(0,t.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5",children:[(0,t.jsx)("div",{className:"text-sm text-zinc-400",children:e.label}),(0,t.jsx)("div",{className:"mt-3 text-2xl font-semibold",children:e.value??"—"})]},e.label))}),(0,t.jsxs)("section",{className:"grid gap-6 md:grid-cols-3",children:[(0,t.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-6 md:col-span-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold",children:"Payout queue"}),(0,t.jsx)("button",{onClick:$,className:"rounded-full border border-white/20 px-4 py-2 text-sm hover:bg-white/10 transition",children:"Refresh"})]}),(0,t.jsx)("div",{className:"mt-4 space-y-3 text-sm text-zinc-300",children:m?Array.from({length:3}).map((e,s)=>(0,t.jsx)(i,{className:"h-14 w-full"},s)):f?(0,t.jsxs)("div",{className:"rounded-xl border border-red-500/20 bg-red-500/5 p-4 text-center",children:[(0,t.jsxs)("p",{className:"text-sm text-red-400 mb-2",children:["Failed to load payouts: ",f]}),(0,t.jsx)("button",{onClick:$,className:"text-sm text-white underline hover:no-underline",children:"Retry"})]}):0===d.length?(0,t.jsx)("p",{className:"text-zinc-500 text-center py-4",children:"No payouts in queue"}):d.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between rounded-xl border border-white/10 bg-black/30 p-3",children:[(0,t.jsxs)("span",{children:[e.affiliateId," • $",e.amount.toLocaleString()," •"," ",(0,t.jsx)("span",{className:"pending"===e.status?"text-yellow-400":"approved"===e.status?"text-green-400":"held"===e.status?"text-orange-400":"rejected"===e.status?"text-red-400":"text-zinc-400",children:e.status})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[("pending"===e.status||"held"===e.status)&&(0,t.jsx)("button",{onClick:()=>T(e.id,"approve"),disabled:v===`${e.id}-approve`,className:"rounded-full bg-white px-3 py-1 text-black text-xs font-medium disabled:opacity-50",children:v===`${e.id}-approve`?"...":"Approve"}),"pending"===e.status&&(0,t.jsx)("button",{onClick:()=>T(e.id,"hold"),disabled:v===`${e.id}-hold`,className:"rounded-full border border-white/20 px-3 py-1 text-white text-xs disabled:opacity-50",children:v===`${e.id}-hold`?"...":"Hold"}),"held"===e.status&&(0,t.jsx)("button",{onClick:()=>T(e.id,"release"),disabled:v===`${e.id}-release`,className:"rounded-full bg-white px-3 py-1 text-black text-xs font-medium disabled:opacity-50",children:v===`${e.id}-release`?"...":"Release"})]})]},e.id))})]}),(0,t.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold",children:"Alerts"}),(0,t.jsx)("ul",{className:"mt-4 space-y-3 text-sm text-zinc-300",children:b?Array.from({length:3}).map((e,s)=>(0,t.jsx)(i,{className:"h-14 w-full"},s)):N?(0,t.jsxs)("div",{className:"rounded-xl border border-red-500/20 bg-red-500/5 p-4 text-center",children:[(0,t.jsxs)("p",{className:"text-sm text-red-400 mb-2",children:["Failed to load logs: ",N]}),(0,t.jsx)("button",{onClick:S,className:"text-sm text-white underline hover:no-underline",children:"Retry"})]}):0===c.length?(0,t.jsx)("p",{className:"text-zinc-500 text-center py-4",children:"No recent alerts"}):c.map(e=>(0,t.jsxs)("li",{className:"rounded-xl border border-white/10 bg-black/30 p-3",children:[(0,t.jsx)("span",{className:"font-medium text-white",children:e.action})," ","on ",e.resourceType," ",e.resourceId,(0,t.jsxs)("div",{className:"text-xs text-zinc-500 mt-1",children:[new Date(e.timestamp).toLocaleString()," • ",e.ip]})]},e.id))})]})]}),(0,t.jsxs)("section",{className:"grid gap-6 md:grid-cols-2",children:[(0,t.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold",children:"Integrations"}),(0,t.jsxs)("div",{className:"mt-4 space-y-3 text-sm text-zinc-300",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between rounded-xl border border-white/10 bg-black/30 p-3",children:[(0,t.jsx)("span",{children:"Google Analytics"}),(0,t.jsx)("span",{className:"text-green-400",children:"Connected"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between rounded-xl border border-white/10 bg-black/30 p-3",children:[(0,t.jsx)("span",{children:"Ads Library"}),(0,t.jsx)("span",{className:"text-green-400",children:"Syncing"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between rounded-xl border border-white/10 bg-black/30 p-3",children:[(0,t.jsx)("span",{children:"Crypto payouts"}),(0,t.jsx)("span",{className:"text-yellow-400",children:"Pending KYC"})]})]})]}),(0,t.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold",children:"Compliance checklist"}),(0,t.jsxs)("div",{className:"mt-4 space-y-3 text-sm text-zinc-300",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between rounded-xl border border-white/10 bg-black/30 p-3",children:[(0,t.jsx)("span",{children:"Affiliate KYC review"}),(0,t.jsx)("span",{className:"text-green-400",children:"OK"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between rounded-xl border border-white/10 bg-black/30 p-3",children:[(0,t.jsx)("span",{children:"Payout holds enforced"}),(0,t.jsx)("span",{className:"text-green-400",children:"OK"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between rounded-xl border border-white/10 bg-black/30 p-3",children:[(0,t.jsx)("span",{children:"Audit logs retention"}),(0,t.jsx)("span",{className:"text-yellow-400",children:"30 days"})]})]})]})]})]})}e.s(["default",()=>d])}]);