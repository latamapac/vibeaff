(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,71251,e=>{"use strict";var t=e.i(79838),a=e.i(42311),r=e.i(71511);let s=["connected","ready","planned"],l=["Search","Social","Push / Pop","Native","In-game / Apps","B2B","Other"],n=[{id:"fallback-1",name:"Google Ads",category:"Search",status:"connected",provider:"google"},{id:"fallback-2",name:"Meta Ads",category:"Social",status:"connected",provider:"meta"},{id:"fallback-3",name:"Microsoft Ads",category:"Search",status:"ready",provider:"microsoft"},{id:"fallback-4",name:"PropellerAds",category:"Push / Pop",status:"ready",provider:"propellerads"}];function o(){let[e,o]=(0,r.useState)([]),[d,i]=(0,r.useState)(!0),[c,h]=(0,r.useState)(null),[u,p]=(0,r.useState)({name:"",category:"",status:"planned",provider:""}),[x,m]=(0,r.useState)(null),[g,b]=(0,r.useState)(null),[v,y]=(0,r.useState)(""),f=(0,r.useMemo)(()=>t.default.env.NEXT_PUBLIC_API_URL??"http://localhost:4000",[]),j=async()=>{i(!0),h(null);try{let e=await fetch(`${f}/v1/channels`);if(!e.ok)throw Error("Failed to load channels");let t=await e.json();o(t.length?t:n)}catch(e){h(e.message),o(n)}finally{i(!1)}};(0,r.useEffect)(()=>{j()},[]);let w=()=>{p({name:"",category:"",status:"planned",provider:""}),m(null)},N=async()=>{(h(null),u.name&&u.category)?(await fetch(`${f}/v1/channels`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:u.name,category:u.category,status:u.status,provider:u.provider||void 0})})).ok?(w(),await j()):h("Failed to create channel."):h("Name and category are required.")},C=async()=>{x&&((h(null),u.name&&u.category)?(await fetch(`${f}/v1/channels/${x}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:u.name,category:u.category,status:u.status,provider:u.provider||void 0})})).ok?(w(),await j()):h("Failed to update channel."):h("Name and category are required."))},k=async e=>{(await fetch(`${f}/v1/channels/${e}`,{method:"DELETE"})).ok?(b(null),await j()):h("Failed to delete channel.")},S=e.filter(e=>e.name.toLowerCase().includes(v.toLowerCase()));return(0,a.jsxs)("section",{className:"rounded-2xl border border-white/10 bg-white/5 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h1",{className:"text-lg font-semibold",children:"Channels library"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[x&&(0,a.jsx)("button",{className:"rounded-full border border-white/20 px-4 py-2 text-sm text-zinc-400 hover:text-white",onClick:w,children:"Cancel"}),(0,a.jsx)("button",{className:"rounded-full border border-white/20 px-4 py-2 text-sm",onClick:x?C:N,children:x?"Save changes":"Add channel"})]})]}),(0,a.jsx)("p",{className:"mt-3 text-sm text-zinc-400",children:"Manage major advertising channels plus push, native, and in-app traffic sources."}),(0,a.jsxs)("div",{className:"mt-6 grid gap-4 md:grid-cols-4",children:[(0,a.jsx)("input",{className:"rounded-xl border border-white/10 bg-black/30 px-3 py-2 text-sm text-white",placeholder:"Channel name",value:u.name,onChange:e=>p(t=>({...t,name:e.target.value}))}),(0,a.jsxs)("select",{className:"rounded-xl border border-white/10 bg-black/30 px-3 py-2 text-sm text-white",value:u.category,onChange:e=>p(t=>({...t,category:e.target.value})),children:[(0,a.jsx)("option",{value:"",disabled:!0,children:"Select category"}),l.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]}),(0,a.jsx)("select",{className:"rounded-xl border border-white/10 bg-black/30 px-3 py-2 text-sm text-white",value:u.status,onChange:e=>p(t=>({...t,status:e.target.value})),children:s.map(e=>(0,a.jsx)("option",{value:e,children:e},e))}),(0,a.jsx)("input",{className:"rounded-xl border border-white/10 bg-black/30 px-3 py-2 text-sm text-white",placeholder:"Provider (optional)",value:u.provider,onChange:e=>p(t=>({...t,provider:e.target.value}))})]}),c?(0,a.jsx)("p",{className:"mt-4 text-sm text-red-300",children:c}):null,d?(0,a.jsx)("p",{className:"mt-4 text-sm text-zinc-400",children:"Loading..."}):null,(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsx)("input",{className:"w-full rounded-xl border border-white/10 bg-black/30 px-3 py-2 text-sm text-white placeholder:text-zinc-500",placeholder:"Search channels by name...",value:v,onChange:e=>y(e.target.value)})}),(0,a.jsx)("div",{className:"mt-4 grid gap-4 md:grid-cols-2",children:S.map(e=>(0,a.jsxs)("div",{className:`flex items-center justify-between rounded-xl border p-4 cursor-pointer transition-colors ${x===e.id?"border-purple-500/60 bg-purple-500/10":"border-white/10 bg-black/30 hover:border-white/20"}`,onClick:()=>{m(e.id),p({name:e.name,category:e.category,status:e.status,provider:e.provider??""})},children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-white",children:e.name}),(0,a.jsxs)("div",{className:"text-xs text-zinc-400",children:[e.category," Â· ",e.status]})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",onClick:e=>e.stopPropagation(),children:g===e.id?(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-xs text-red-300",children:"Confirm delete?"}),(0,a.jsx)("button",{className:"rounded-full bg-red-500/20 border border-red-500/40 px-3 py-1 text-xs text-red-300 hover:bg-red-500/30",onClick:()=>k(e.id),children:"Yes"}),(0,a.jsx)("button",{className:"rounded-full border border-white/20 px-3 py-1 text-xs text-white hover:bg-white/10",onClick:()=>b(null),children:"Cancel"})]}):(0,a.jsx)("button",{className:"rounded-full border border-white/20 px-3 py-1 text-xs text-white",onClick:()=>b(e.id),children:"Remove"})})]},e.id))})]})}e.s(["default",()=>o])}]);