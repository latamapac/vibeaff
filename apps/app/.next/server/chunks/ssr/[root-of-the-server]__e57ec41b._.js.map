{"version":3,"sources":["../../../../../../../VibeAff/node_modules/next/src/server/route-modules/app-page/module.compiled.js","../../../../../../../VibeAff/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.ts","../../../../../../../VibeAff/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts","../../../../../../../VibeAff/apps/app/src/app/admin/channels/ChannelManager.tsx"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxRuntime\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n","\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\n\ntype Channel = {\n  id: string;\n  name: string;\n  category: string;\n  status: \"connected\" | \"ready\" | \"planned\";\n  provider?: string | null;\n};\n\nconst statusOptions: Channel[\"status\"][] = [\"connected\", \"ready\", \"planned\"];\n\nconst categoryOptions = [\n  \"Search\",\n  \"Social\",\n  \"Push / Pop\",\n  \"Native\",\n  \"In-game / Apps\",\n  \"B2B\",\n  \"Other\",\n];\n\nconst fallbackChannels: Channel[] = [\n  { id: \"fallback-1\", name: \"Google Ads\", category: \"Search\", status: \"connected\", provider: \"google\" },\n  { id: \"fallback-2\", name: \"Meta Ads\", category: \"Social\", status: \"connected\", provider: \"meta\" },\n  { id: \"fallback-3\", name: \"Microsoft Ads\", category: \"Search\", status: \"ready\", provider: \"microsoft\" },\n  { id: \"fallback-4\", name: \"PropellerAds\", category: \"Push / Pop\", status: \"ready\", provider: \"propellerads\" },\n];\n\nfunction getApiUrl() {\n  return process.env.NEXT_PUBLIC_API_URL ?? \"http://localhost:4000\";\n}\n\nexport default function ChannelManager() {\n  const [channels, setChannels] = useState<Channel[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [form, setForm] = useState({ name: \"\", category: \"\", status: \"planned\" as Channel[\"status\"], provider: \"\" });\n  const [editing, setEditing] = useState<string | null>(null);\n  const [confirmDelete, setConfirmDelete] = useState<string | null>(null);\n  const [searchFilter, setSearchFilter] = useState(\"\");\n\n  const apiUrl = useMemo(() => getApiUrl(), []);\n\n  const load = async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      const res = await fetch(`${apiUrl}/v1/channels`);\n      if (!res.ok) {\n        throw new Error(\"Failed to load channels\");\n      }\n      const data = (await res.json()) as Channel[];\n      setChannels(data.length ? data : fallbackChannels);\n    } catch (err) {\n      setError((err as Error).message);\n      setChannels(fallbackChannels);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    void load();\n  }, []);\n\n  const resetForm = () => {\n    setForm({ name: \"\", category: \"\", status: \"planned\", provider: \"\" });\n    setEditing(null);\n  };\n\n  const createChannel = async () => {\n    setError(null);\n    if (!form.name || !form.category) {\n      setError(\"Name and category are required.\");\n      return;\n    }\n    const res = await fetch(`${apiUrl}/v1/channels`, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        name: form.name,\n        category: form.category,\n        status: form.status,\n        provider: form.provider || undefined,\n      }),\n    });\n    if (!res.ok) {\n      setError(\"Failed to create channel.\");\n      return;\n    }\n    resetForm();\n    await load();\n  };\n\n  const updateChannel = async () => {\n    if (!editing) return;\n    setError(null);\n    if (!form.name || !form.category) {\n      setError(\"Name and category are required.\");\n      return;\n    }\n    const res = await fetch(`${apiUrl}/v1/channels/${editing}`, {\n      method: \"PUT\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        name: form.name,\n        category: form.category,\n        status: form.status,\n        provider: form.provider || undefined,\n      }),\n    });\n    if (!res.ok) {\n      setError(\"Failed to update channel.\");\n      return;\n    }\n    resetForm();\n    await load();\n  };\n\n  const deleteChannel = async (id: string) => {\n    const res = await fetch(`${apiUrl}/v1/channels/${id}`, { method: \"DELETE\" });\n    if (!res.ok) {\n      setError(\"Failed to delete channel.\");\n      return;\n    }\n    setConfirmDelete(null);\n    await load();\n  };\n\n  const startEditing = (channel: Channel) => {\n    setEditing(channel.id);\n    setForm({\n      name: channel.name,\n      category: channel.category,\n      status: channel.status,\n      provider: channel.provider ?? \"\",\n    });\n  };\n\n  const filteredChannels = channels.filter((ch) =>\n    ch.name.toLowerCase().includes(searchFilter.toLowerCase())\n  );\n\n  return (\n    <section className=\"rounded-2xl border border-white/10 bg-white/5 p-6\">\n      <div className=\"flex items-center justify-between\">\n        <h1 className=\"text-lg font-semibold\">Channels library</h1>\n        <div className=\"flex items-center gap-2\">\n          {editing && (\n            <button\n              className=\"rounded-full border border-white/20 px-4 py-2 text-sm text-zinc-400 hover:text-white\"\n              onClick={resetForm}\n            >\n              Cancel\n            </button>\n          )}\n          <button\n            className=\"rounded-full border border-white/20 px-4 py-2 text-sm\"\n            onClick={editing ? updateChannel : createChannel}\n          >\n            {editing ? \"Save changes\" : \"Add channel\"}\n          </button>\n        </div>\n      </div>\n      <p className=\"mt-3 text-sm text-zinc-400\">\n        Manage major advertising channels plus push, native, and in-app traffic sources.\n      </p>\n\n      <div className=\"mt-6 grid gap-4 md:grid-cols-4\">\n        <input\n          className=\"rounded-xl border border-white/10 bg-black/30 px-3 py-2 text-sm text-white\"\n          placeholder=\"Channel name\"\n          value={form.name}\n          onChange={(event) => setForm((prev) => ({ ...prev, name: event.target.value }))}\n        />\n        <select\n          className=\"rounded-xl border border-white/10 bg-black/30 px-3 py-2 text-sm text-white\"\n          value={form.category}\n          onChange={(event) => setForm((prev) => ({ ...prev, category: event.target.value }))}\n        >\n          <option value=\"\" disabled>\n            Select category\n          </option>\n          {categoryOptions.map((cat) => (\n            <option key={cat} value={cat}>\n              {cat}\n            </option>\n          ))}\n        </select>\n        <select\n          className=\"rounded-xl border border-white/10 bg-black/30 px-3 py-2 text-sm text-white\"\n          value={form.status}\n          onChange={(event) => setForm((prev) => ({ ...prev, status: event.target.value as Channel[\"status\"] }))}\n        >\n          {statusOptions.map((status) => (\n            <option key={status} value={status}>\n              {status}\n            </option>\n          ))}\n        </select>\n        <input\n          className=\"rounded-xl border border-white/10 bg-black/30 px-3 py-2 text-sm text-white\"\n          placeholder=\"Provider (optional)\"\n          value={form.provider}\n          onChange={(event) => setForm((prev) => ({ ...prev, provider: event.target.value }))}\n        />\n      </div>\n\n      {error ? <p className=\"mt-4 text-sm text-red-300\">{error}</p> : null}\n      {loading ? <p className=\"mt-4 text-sm text-zinc-400\">Loading...</p> : null}\n\n      {/* Search / filter */}\n      <div className=\"mt-6\">\n        <input\n          className=\"w-full rounded-xl border border-white/10 bg-black/30 px-3 py-2 text-sm text-white placeholder:text-zinc-500\"\n          placeholder=\"Search channels by name...\"\n          value={searchFilter}\n          onChange={(e) => setSearchFilter(e.target.value)}\n        />\n      </div>\n\n      <div className=\"mt-4 grid gap-4 md:grid-cols-2\">\n        {filteredChannels.map((channel) => (\n          <div\n            key={channel.id}\n            className={`flex items-center justify-between rounded-xl border p-4 cursor-pointer transition-colors ${\n              editing === channel.id\n                ? \"border-purple-500/60 bg-purple-500/10\"\n                : \"border-white/10 bg-black/30 hover:border-white/20\"\n            }`}\n            onClick={() => startEditing(channel)}\n          >\n            <div>\n              <div className=\"text-white\">{channel.name}</div>\n              <div className=\"text-xs text-zinc-400\">\n                {channel.category} Â· {channel.status}\n              </div>\n            </div>\n            <div className=\"flex items-center gap-2\" onClick={(e) => e.stopPropagation()}>\n              {confirmDelete === channel.id ? (\n                <div className=\"flex items-center gap-2\">\n                  <span className=\"text-xs text-red-300\">Confirm delete?</span>\n                  <button\n                    className=\"rounded-full bg-red-500/20 border border-red-500/40 px-3 py-1 text-xs text-red-300 hover:bg-red-500/30\"\n                    onClick={() => deleteChannel(channel.id)}\n                  >\n                    Yes\n                  </button>\n                  <button\n                    className=\"rounded-full border border-white/20 px-3 py-1 text-xs text-white hover:bg-white/10\"\n                    onClick={() => setConfirmDelete(null)}\n                  >\n                    Cancel\n                  </button>\n                </div>\n              ) : (\n                <button\n                  className=\"rounded-full border border-white/20 px-3 py-1 text-xs text-white\"\n                  onClick={() => setConfirmDelete(channel.id)}\n                >\n                  Remove\n                </button>\n              )}\n            </div>\n          </div>\n        ))}\n      </div>\n    </section>\n  );\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK","vendored","ReactJsxRuntime","React"],"mappings":"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","ignoreList":[0,1,2]}