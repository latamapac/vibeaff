{"version":3,"sources":["../../../../../../../VibeAff/apps/app/src/app/admin/audit/page.tsx"],"sourcesContent":["type AuditEntry = {\n  id: string;\n  userId: string | null;\n  action: string;\n  entity: string;\n  entityId: string | null;\n  details: string | null;\n  ipAddress: string | null;\n  createdAt: string;\n};\n\nasync function loadAuditLogs(): Promise<AuditEntry[]> {\n  const apiUrl = process.env.NEXT_PUBLIC_API_URL ?? \"http://localhost:4000\";\n  try {\n    const res = await fetch(`${apiUrl}/v1/audit-logs?limit=100`, { cache: \"no-store\" });\n    if (!res.ok) return [];\n    return (await res.json()) as AuditEntry[];\n  } catch (_err) {\n    return [];\n  }\n}\n\nexport default async function AuditLogsPage() {\n  const logs = await loadAuditLogs();\n  return (\n    <section className=\"rounded-2xl border border-white/10 bg-white/5 p-6\">\n      <h1 className=\"text-lg font-semibold\">Audit logs</h1>\n      <p className=\"mt-3 text-sm text-zinc-400\">\n        Recent platform actions for compliance and debugging.\n      </p>\n      <div className=\"mt-6 space-y-2 text-sm\">\n        {logs.length === 0 && (\n          <p className=\"text-zinc-400\">No audit entries yet.</p>\n        )}\n        {logs.map((log) => (\n          <div key={log.id} className=\"flex flex-col gap-1 rounded-xl border border-white/10 bg-black/30 p-3 md:flex-row md:items-center md:justify-between\">\n            <div>\n              <span className=\"text-white\">{log.action}</span>\n              <span className=\"ml-2 text-zinc-400\">{log.entity}{log.entityId ? ` #${log.entityId.slice(0, 8)}` : \"\"}</span>\n            </div>\n            <div className=\"text-xs text-zinc-500\">\n              {new Date(log.createdAt).toLocaleString()}\n              {log.ipAddress ? ` Â· ${log.ipAddress}` : \"\"}\n            </div>\n          </div>\n        ))}\n      </div>\n    </section>\n  );\n}\n"],"names":[],"mappings":"8WAWA,eAAe,IACb,IAAM,EAAS,QAAQ,GAAG,CAAC,mBAAmB,EAAI,wBAClD,GAAI,CACF,IAAM,EAAM,MAAM,MAAM,CAAA,EAAG,EAAO,wBAAwB,CAAC,CAAE,CAAE,MAAO,UAAW,GACjF,GAAI,CAAC,EAAI,EAAE,CAAE,MAAO,EAAE,CACtB,OAAQ,MAAM,EAAI,IAAI,EACxB,CAAE,MAAO,EAAM,CACb,MAAO,EAAE,AACX,CACF,CAEe,eAAe,IAC5B,IAAM,EAAO,MAAM,IACnB,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,UAAA,CAAQ,UAAU,8DACjB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,iCAAwB,eACtC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,sCAA6B,0DAG1C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mCACI,IAAhB,EAAK,MAAM,EACV,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yBAAgB,0BAE9B,EAAK,GAAG,CAAC,AAAC,GACT,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAiB,UAAU,iIAC1B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,sBAAc,EAAI,MAAM,GACxC,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,+BAAsB,EAAI,MAAM,CAAE,EAAI,QAAQ,CAAG,CAAC,EAAE,EAAE,EAAI,QAAQ,CAAC,KAAK,CAAC,EAAG,GAAA,CAAI,CAAG,SAErG,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kCACZ,IAAI,KAAK,EAAI,SAAS,EAAE,cAAc,GACtC,EAAI,SAAS,CAAG,CAAC,MAAG,EAAE,EAAI,SAAS,CAAA,CAAE,CAAG,QAPnC,EAAI,EAAE,QAc1B"}