{"version":3,"sources":["../../../../../../../VibeAff/node_modules/next/src/server/route-modules/app-page/module.compiled.js","../../../../../../../VibeAff/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.ts","../../../../../../../VibeAff/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts","../../../../../../../VibeAff/node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","../../../../../../../VibeAff/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-server-dom-turbopack-client.ts","../../../../../../../VibeAff/apps/app/src/app/register/page.tsx"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxRuntime\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactServerDOMTurbopackClient\n","\"use client\";\n\nimport Link from \"next/link\";\nimport { useState } from \"react\";\n\nconst API_URL = process.env.NEXT_PUBLIC_API_URL ?? \"http://localhost:4000\";\n\nconst roles = [\n  { value: \"admin\", label: \"Admin\" },\n  { value: \"partner\", label: \"Partner\" },\n  { value: \"affiliate\", label: \"Affiliate\" },\n];\n\nexport default function RegisterPage() {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [role, setRole] = useState(\"affiliate\");\n  const [error, setError] = useState<string | null>(null);\n  const [loading, setLoading] = useState(false);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError(null);\n    setLoading(true);\n\n    try {\n      const res = await fetch(`${API_URL}/v1/auth/register`, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ email, password, role }),\n      });\n\n      if (!res.ok) {\n        const body = await res.json().catch(() => null);\n        throw new Error(body?.message ?? \"Registration failed\");\n      }\n\n      const { token, role: assignedRole } = (await res.json()) as {\n        token: string;\n        role: string;\n      };\n\n      // Store token in localStorage\n      localStorage.setItem(\"vibeaff_token\", token);\n\n      // Set httpOnly cookie via API route\n      await fetch(\"/api/auth/session\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ token }),\n      });\n\n      // Redirect based on role\n      const dest =\n        assignedRole === \"admin\"\n          ? \"/admin\"\n          : assignedRole === \"partner\"\n            ? \"/partner\"\n            : \"/affiliate\";\n      window.location.href = dest;\n    } catch (err) {\n      setError((err as Error).message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"flex min-h-screen items-center justify-center bg-zinc-950 px-4\">\n      <form\n        onSubmit={handleSubmit}\n        className=\"w-full max-w-sm space-y-6 rounded-2xl border border-white/10 bg-white/5 p-8\"\n      >\n        <h1 className=\"text-2xl font-semibold text-white\">Create an account</h1>\n\n        {error && (\n          <div className=\"rounded-xl border border-red-500/30 bg-red-500/10 px-4 py-3 text-sm text-red-300\">\n            {error}\n          </div>\n        )}\n\n        <div className=\"space-y-2\">\n          <label className=\"block text-sm text-zinc-400\" htmlFor=\"email\">\n            Email\n          </label>\n          <input\n            id=\"email\"\n            type=\"email\"\n            required\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n            className=\"w-full rounded-xl border border-white/10 bg-black/30 px-4 py-3 text-sm text-white placeholder:text-zinc-500 focus:border-white/30 focus:outline-none\"\n            placeholder=\"you@example.com\"\n          />\n        </div>\n\n        <div className=\"space-y-2\">\n          <label className=\"block text-sm text-zinc-400\" htmlFor=\"password\">\n            Password\n          </label>\n          <input\n            id=\"password\"\n            type=\"password\"\n            required\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n            className=\"w-full rounded-xl border border-white/10 bg-black/30 px-4 py-3 text-sm text-white placeholder:text-zinc-500 focus:border-white/30 focus:outline-none\"\n            placeholder=\"••••••••\"\n          />\n        </div>\n\n        <div className=\"space-y-2\">\n          <label className=\"block text-sm text-zinc-400\" htmlFor=\"role\">\n            Role\n          </label>\n          <select\n            id=\"role\"\n            value={role}\n            onChange={(e) => setRole(e.target.value)}\n            className=\"w-full rounded-xl border border-white/10 bg-black/30 px-4 py-3 text-sm text-white focus:border-white/30 focus:outline-none\"\n          >\n            {roles.map((r) => (\n              <option key={r.value} value={r.value}>\n                {r.label}\n              </option>\n            ))}\n          </select>\n        </div>\n\n        <button\n          type=\"submit\"\n          disabled={loading}\n          className=\"w-full rounded-full bg-white py-3 text-sm font-medium text-black transition hover:bg-zinc-200 disabled:opacity-50\"\n        >\n          {loading ? \"Registering...\" : \"Register\"}\n        </button>\n\n        <p className=\"text-center text-sm text-zinc-400\">\n          Already have an account?{\" \"}\n          <Link href=\"/login\" className=\"text-white hover:underline\">\n            Log in\n          </Link>\n        </p>\n      </form>\n    </div>\n  );\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK","vendored","ReactJsxRuntime","React","AppRouterContext","ReactServerDOMTurbopackClient"],"mappings":"yNA0BQG,GAAOC,OAAO,CAAGC,EAAQ,CAAA,CAAA,IAAA,iCC1BjCF,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRI,QAAQ,CAAC,YAAY,CAAEC,eAAe,+BCFxCP,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRI,QAAQ,CAAC,YAAY,CAAEE,KAAK,8BCF9BR,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRI,QAAQ,CAAC,QAAW,CAACG,gBAAgB,+BCFvCT,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRI,QAAQ,CAAC,YAAY,CAAEI,6BAA6B,0CCAtD,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEA,IAAM,EAAU,QAAQ,GAAG,CAAC,mBAAmB,EAAI,wBAE7C,EAAQ,CACZ,CAAE,MAAO,QAAS,MAAO,OAAQ,EACjC,CAAE,MAAO,UAAW,MAAO,SAAU,EACrC,CAAE,MAAO,YAAa,MAAO,WAAY,EAC1C,CAEc,SAAS,IACtB,GAAM,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAC7B,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACnC,CAAC,EAAM,EAAQ,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,aAC3B,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAwB,MAC5C,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAEjC,EAAe,MAAO,IAC1B,EAAE,cAAc,GAChB,EAAS,MACT,GAAW,GAEX,GAAI,CACF,IAAM,EAAM,MAAM,MAAM,CAAA,EAAG,EAAQ,iBAAiB,CAAC,CAAE,CACrD,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAmB,EAC9C,KAAM,KAAK,SAAS,CAAC,OAAE,WAAO,OAAU,CAAK,EAC/C,GAEA,GAAI,CAAC,EAAI,EAAE,CAAE,CACX,IAAM,EAAO,MAAM,EAAI,IAAI,GAAG,KAAK,CAAC,IAAM,KAC1C,OAAM,AAAI,MAAM,GAAM,SAAW,sBACnC,CAEA,GAAM,OAAE,CAAK,CAAE,KAAM,CAAY,CAAE,CAAI,MAAM,EAAI,IAAI,GAMrD,aAAa,OAAO,CAAC,gBAAiB,GAGtC,MAAM,MAAM,oBAAqB,CAC/B,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAmB,EAC9C,KAAM,KAAK,SAAS,CAAC,OAAE,CAAM,EAC/B,GASA,OAAO,QAAQ,CAAC,IAAI,CALD,EAKI,QALrB,EACI,SACiB,YAAjB,EACE,WACA,YAEV,CAAE,MAAO,EAAK,CACZ,EAAU,EAAc,OAAO,CACjC,QAAU,CACR,GAAW,EACb,CACF,EAEA,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,0EACb,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CACC,SAAU,EACV,UAAU,wFAEV,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,6CAAoC,sBAEjD,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,4FACZ,IAIL,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,8BAA8B,QAAQ,iBAAQ,UAG/D,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,GAAG,QACH,KAAK,QACL,QAAQ,CAAA,CAAA,EACR,MAAO,EACP,SAAU,AAAC,GAAM,EAAS,EAAE,MAAM,CAAC,KAAK,EACxC,UAAU,uJACV,YAAY,uBAIhB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,8BAA8B,QAAQ,oBAAW,aAGlE,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,GAAG,WACH,KAAK,WACL,QAAQ,CAAA,CAAA,EACR,MAAO,EACP,SAAU,AAAC,GAAM,EAAY,EAAE,MAAM,CAAC,KAAK,EAC3C,UAAU,uJACV,YAAY,gBAIhB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,8BAA8B,QAAQ,gBAAO,SAG9D,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,GAAG,OACH,MAAO,EACP,SAAW,AAAD,GAAO,EAAQ,EAAE,MAAM,CAAC,KAAK,EACvC,UAAU,sIAET,EAAM,GAAG,CAAC,AAAC,GACV,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAqB,MAAO,EAAE,KAAK,UACjC,EAAE,KAAK,EADG,EAAE,KAAK,QAO1B,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,KAAK,SACL,SAAU,EACV,UAAU,6HAET,EAAU,iBAAmB,aAGhC,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,8CAAoC,2BACtB,IACzB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,SAAS,UAAU,sCAA6B,kBAOrE","ignoreList":[0,1,2,3,4]}