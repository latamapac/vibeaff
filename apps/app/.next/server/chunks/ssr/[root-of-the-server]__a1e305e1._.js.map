{"version":3,"sources":["../../../../../../../VibeAff/node_modules/next/src/server/route-modules/app-page/module.compiled.js","../../../../../../../VibeAff/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.ts","../../../../../../../VibeAff/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts","../../../../../../../VibeAff/node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","../../../../../../../VibeAff/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-server-dom-turbopack-client.ts","../../../../../../../VibeAff/apps/app/src/app/login/page.tsx"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxRuntime\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactServerDOMTurbopackClient\n","\"use client\";\n\nimport Link from \"next/link\";\nimport { useState } from \"react\";\n\nconst API_URL = process.env.NEXT_PUBLIC_API_URL ?? \"http://localhost:4000\";\n\nexport default function LoginPage() {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [error, setError] = useState<string | null>(null);\n  const [loading, setLoading] = useState(false);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError(null);\n    setLoading(true);\n\n    try {\n      const res = await fetch(`${API_URL}/v1/auth/login`, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ email, password }),\n      });\n\n      if (!res.ok) {\n        const body = await res.json().catch(() => null);\n        throw new Error(body?.message ?? \"Login failed\");\n      }\n\n      const { token, role } = (await res.json()) as { token: string; role: string };\n\n      // Store token in localStorage\n      localStorage.setItem(\"vibeaff_token\", token);\n\n      // Set httpOnly cookie via API route\n      await fetch(\"/api/auth/session\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ token }),\n      });\n\n      // Redirect based on role\n      const dest =\n        role === \"admin\" ? \"/admin\" : role === \"partner\" ? \"/partner\" : \"/affiliate\";\n      window.location.href = dest;\n    } catch (err) {\n      setError((err as Error).message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"flex min-h-screen items-center justify-center bg-zinc-950 px-4\">\n      <form\n        onSubmit={handleSubmit}\n        className=\"w-full max-w-sm space-y-6 rounded-2xl border border-white/10 bg-white/5 p-8\"\n      >\n        <h1 className=\"text-2xl font-semibold text-white\">Log in to VibeAff</h1>\n\n        {error && (\n          <div className=\"rounded-xl border border-red-500/30 bg-red-500/10 px-4 py-3 text-sm text-red-300\">\n            {error}\n          </div>\n        )}\n\n        <div className=\"space-y-2\">\n          <label className=\"block text-sm text-zinc-400\" htmlFor=\"email\">\n            Email\n          </label>\n          <input\n            id=\"email\"\n            type=\"email\"\n            required\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n            className=\"w-full rounded-xl border border-white/10 bg-black/30 px-4 py-3 text-sm text-white placeholder:text-zinc-500 focus:border-white/30 focus:outline-none\"\n            placeholder=\"you@example.com\"\n          />\n        </div>\n\n        <div className=\"space-y-2\">\n          <label className=\"block text-sm text-zinc-400\" htmlFor=\"password\">\n            Password\n          </label>\n          <input\n            id=\"password\"\n            type=\"password\"\n            required\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n            className=\"w-full rounded-xl border border-white/10 bg-black/30 px-4 py-3 text-sm text-white placeholder:text-zinc-500 focus:border-white/30 focus:outline-none\"\n            placeholder=\"••••••••\"\n          />\n        </div>\n\n        <button\n          type=\"submit\"\n          disabled={loading}\n          className=\"w-full rounded-full bg-white py-3 text-sm font-medium text-black transition hover:bg-zinc-200 disabled:opacity-50\"\n        >\n          {loading ? \"Logging in...\" : \"Log in\"}\n        </button>\n\n        <p className=\"text-center text-sm text-zinc-400\">\n          Don&apos;t have an account?{\" \"}\n          <Link href=\"/register\" className=\"text-white hover:underline\">\n            Register\n          </Link>\n        </p>\n\n        {/* Demo Hint */}\n        <div className=\"mt-6 rounded-xl border border-dashed border-white/20 bg-white/5 px-4 py-3\">\n          <p className=\"text-center text-xs text-zinc-500\">\n            Demo access: <span className=\"font-mono text-zinc-400\">admin@vibeaff.com</span> / <span className=\"font-mono text-zinc-400\">admin</span>\n          </p>\n        </div>\n      </form>\n    </div>\n  );\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK","vendored","ReactJsxRuntime","React","AppRouterContext","ReactServerDOMTurbopackClient"],"mappings":"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","ignoreList":[0,1,2,3,4]}