{"version":3,"sources":["../../../../../../../VibeAff/node_modules/next/src/server/route-modules/app-page/module.compiled.js","../../../../../../../VibeAff/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.ts","../../../../../../../VibeAff/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts","../../../../../../../VibeAff/apps/app/src/app/admin/payouts/page.tsx"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxRuntime\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n","\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\n\ntype Payout = {\n  id: string;\n  affiliateId: string;\n  amount: number;\n  currency: string;\n  status: string;\n  holdUntil: string | null;\n  createdAt: string;\n};\n\nconst statusColors: Record<string, string> = {\n  on_hold: \"text-yellow-300 bg-yellow-500/20\",\n  approved: \"text-sky-300 bg-sky-500/20\",\n  released: \"text-emerald-300 bg-emerald-500/20\",\n  rejected: \"text-red-300 bg-red-500/20\",\n};\n\nconst filterTabs = [\n  { label: \"All\", value: \"all\" },\n  { label: \"On Hold\", value: \"on_hold\" },\n  { label: \"Approved\", value: \"approved\" },\n  { label: \"Released\", value: \"released\" },\n  { label: \"Rejected\", value: \"rejected\" },\n];\n\nfunction getApiUrl() {\n  return process.env.NEXT_PUBLIC_API_URL ?? \"http://localhost:4000\";\n}\n\nexport default function PayoutsPage() {\n  const [payouts, setPayouts] = useState<Payout[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [statusFilter, setStatusFilter] = useState(\"all\");\n  const [confirmAction, setConfirmAction] = useState<{ id: string; verb: string; label: string } | null>(null);\n  const apiUrl = useMemo(() => getApiUrl(), []);\n\n  const load = async () => {\n    setLoading(true);\n    try {\n      const res = await fetch(`${apiUrl}/v1/payouts`);\n      if (res.ok) setPayouts(await res.json());\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => { void load(); }, []);\n\n  const action = async (id: string, verb: string) => {\n    await fetch(`${apiUrl}/v1/payouts/${id}/${verb}`, { method: \"POST\" });\n    setConfirmAction(null);\n    await load();\n  };\n\n  const filteredPayouts = statusFilter === \"all\"\n    ? payouts\n    : payouts.filter((p) => p.status === statusFilter);\n\n  return (\n    <section className=\"rounded-2xl border border-white/10 bg-white/5 p-6\">\n      <h1 className=\"text-lg font-semibold\">Payout queue</h1>\n      <p className=\"mt-3 text-sm text-zinc-400\">\n        Hold, approve, release, or reject affiliate payouts.\n      </p>\n\n      {/* Status filter tabs */}\n      <div className=\"mt-5 flex flex-wrap gap-2\">\n        {filterTabs.map((tab) => (\n          <button\n            key={tab.value}\n            className={`rounded-full px-4 py-1.5 text-sm font-medium transition-colors ${\n              statusFilter === tab.value\n                ? \"bg-white text-black\"\n                : \"border border-white/20 text-zinc-400 hover:text-white hover:border-white/40\"\n            }`}\n            onClick={() => setStatusFilter(tab.value)}\n          >\n            {tab.label}\n          </button>\n        ))}\n      </div>\n\n      {loading && <p className=\"mt-4 text-sm text-zinc-400\">Loading...</p>}\n      <div className=\"mt-6 space-y-3 text-sm\">\n        {filteredPayouts.length === 0 && !loading && (\n          <div className=\"flex flex-col items-center justify-center py-16 text-zinc-400\">\n            <svg\n              className=\"mb-4 h-12 w-12 text-zinc-600\"\n              fill=\"none\"\n              viewBox=\"0 0 24 24\"\n              stroke=\"currentColor\"\n              strokeWidth={1.5}\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                d=\"M2.25 18.75a60.07 60.07 0 0 1 15.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 0 1 3 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 0 0-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 0 1-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 0 0 3 15h-.75M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm3 0h.008v.008H18V10.5Zm-12 0h.008v.008H6V10.5Z\"\n              />\n            </svg>\n            <p className=\"text-base font-medium\">No payouts match the current filter</p>\n            <p className=\"mt-1 text-sm text-zinc-500\">Try selecting a different status tab above.</p>\n          </div>\n        )}\n        {filteredPayouts.map((p) => (\n          <div key={p.id} className=\"flex flex-col gap-3 rounded-xl border border-white/10 bg-black/30 p-4 md:flex-row md:items-center md:justify-between\">\n            <div>\n              <div className=\"text-white\">\n                {p.affiliateId.slice(0, 12)}... &middot; {p.currency} {p.amount.toLocaleString()}\n              </div>\n              <div className=\"text-xs text-zinc-400\">\n                {p.holdUntil ? `Hold until ${new Date(p.holdUntil).toLocaleDateString()}` : \"No hold\"}\n              </div>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <span className={`rounded-full px-3 py-1 text-xs ${statusColors[p.status] ?? \"text-zinc-300 bg-white/10\"}`}>\n                {p.status}\n              </span>\n              {p.status === \"on_hold\" && (\n                <button\n                  className=\"rounded-full bg-white px-3 py-1 text-black\"\n                  onClick={() => setConfirmAction({ id: p.id, verb: \"approve\", label: \"approve\" })}\n                >\n                  Approve\n                </button>\n              )}\n              {p.status === \"approved\" && (\n                <button\n                  className=\"rounded-full bg-emerald-500 px-3 py-1 text-black\"\n                  onClick={() => setConfirmAction({ id: p.id, verb: \"release\", label: \"release\" })}\n                >\n                  Release\n                </button>\n              )}\n              {(p.status === \"on_hold\" || p.status === \"approved\") && (\n                <button\n                  className=\"rounded-full border border-white/20 px-3 py-1 text-white\"\n                  onClick={() => setConfirmAction({ id: p.id, verb: \"reject\", label: \"reject\" })}\n                >\n                  Reject\n                </button>\n              )}\n            </div>\n          </div>\n        ))}\n      </div>\n\n      {/* Confirmation modal */}\n      {confirmAction && (\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm\">\n          <div className=\"w-full max-w-md rounded-2xl border border-white/10 bg-zinc-900 p-6 shadow-xl\">\n            <h2 className=\"text-lg font-semibold text-white\">Confirm action</h2>\n            <p className=\"mt-3 text-sm text-zinc-300\">\n              Are you sure you want to <span className=\"font-medium text-white\">{confirmAction.label}</span> this payout?\n            </p>\n            <div className=\"mt-6 flex justify-end gap-3\">\n              <button\n                className=\"rounded-full border border-white/20 px-5 py-2 text-sm text-zinc-400 hover:text-white\"\n                onClick={() => setConfirmAction(null)}\n              >\n                Cancel\n              </button>\n              <button\n                className=\"rounded-full bg-white px-5 py-2 text-sm font-medium text-black hover:bg-zinc-200\"\n                onClick={() => action(confirmAction.id, confirmAction.verb)}\n              >\n                Confirm\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </section>\n  );\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK","vendored","ReactJsxRuntime","React"],"mappings":"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","ignoreList":[0,1,2]}